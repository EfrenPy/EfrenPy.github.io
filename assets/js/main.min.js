(()=>{function I(){var t=document.querySelector(".nav-toggle"),e=document.querySelector(".site-nav");if(!t||!e)return;t.addEventListener("click",function(){var o=e.classList.toggle("is-open");t.setAttribute("aria-expanded",String(o)),t.classList.toggle("close",o),document.body.classList.toggle("overflow--hidden",o)});function r(){e.classList.remove("is-open"),t.setAttribute("aria-expanded","false"),t.classList.remove("close"),document.body.classList.remove("overflow--hidden")}var n=e.querySelectorAll(".nav-links a");n.forEach(function(o){o.addEventListener("click",r)});var a=window.matchMedia("(min-width: 768px)");a.addEventListener?a.addEventListener("change",function(){a.matches&&r()}):a.addListener&&a.addListener(function(){a.matches&&r()}),document.addEventListener("keydown",function(o){o.key==="Escape"&&e.classList.contains("is-open")&&(r(),t.focus())})}function C(){let t=window.location.pathname;document.querySelectorAll(".nav-links a").forEach(r=>{r.classList.remove("active");let n=new URL(r.href).pathname;(t===n||n!=="/"&&t.startsWith(n))&&r.classList.add("active")})}var _=null;function T(t){var e=document.getElementById("sr-announcer");e&&(_&&clearTimeout(_),e.textContent=t,_=setTimeout(function(){e.textContent=""},1e3))}function O(){let t=document.querySelector(".theme-toggle");if(!t)return;let e=a=>{document.querySelectorAll(".theme-img").forEach(o=>{o.src=o.getAttribute("data-"+a)||o.src})},r=a=>{document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a),e(a)};t.addEventListener("click",()=>{let o=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";r(o),T(o==="dark"?"Dark mode enabled":"Light mode enabled")}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>{localStorage.getItem("theme")||r(a.matches?"dark":"light")});let n=document.documentElement.getAttribute("data-theme")||"light";e(n)}function P(){let t=document.querySelector(".lang-toggle");if(!t)return;let e=a=>{document.documentElement.setAttribute("data-lang",a),document.documentElement.setAttribute("lang",a),localStorage.setItem("lang",a)},r=a=>{t.setAttribute("aria-pressed",a==="es"?"true":"false"),document.querySelectorAll("[data-i18n-"+a+"]").forEach(o=>{let c=o.getAttribute("data-i18n-"+a);o.tagName==="INPUT"?o.placeholder=c:o.hasAttribute("aria-label")&&o.setAttribute("aria-label",c)})},n=document.documentElement.getAttribute("data-lang")||"en";r(n),t.addEventListener("click",()=>{let o=document.documentElement.getAttribute("data-lang")==="en"?"es":"en";e(o),r(o),T(o==="es"?"Idioma cambiado a espa\xF1ol":"Language changed to English")})}function B(){var t=document.querySelector(".color-toggle"),e=document.querySelector(".color-picker");if(!t||!e)return;function r(s){s=s.replace("#","");var l=parseInt(s.substring(0,2),16),i=parseInt(s.substring(2,4),16),d=parseInt(s.substring(4,6),16);return l+", "+i+", "+d}function n(s,l){var i=document.documentElement;i.style.setProperty("--color-primary",s),i.style.setProperty("--color-accent",l),i.style.setProperty("--color-primary-rgb",r(s)),i.style.setProperty("--color-accent-rgb",r(l)),i.style.setProperty("--gradient-primary","linear-gradient(135deg, "+s+", "+l+")"),i.style.setProperty("--gradient-subtle","linear-gradient(135deg, "+s+"14, "+l+"14)")}function a(){e.classList.add("is-open"),t.setAttribute("aria-expanded","true");var s=e.querySelector('[aria-checked="true"]')||c[0];s&&s.focus()}function o(){e.classList.remove("is-open"),t.setAttribute("aria-expanded","false")}t.addEventListener("click",function(s){s.stopPropagation(),e.classList.contains("is-open")?o():a()}),document.addEventListener("click",function(s){!e.contains(s.target)&&s.target!==t&&o()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&e.classList.contains("is-open")&&(o(),t.focus())});var c=e.querySelectorAll(".color-swatch");function u(s){var l=s.getAttribute("data-primary"),i=s.getAttribute("data-accent");c.forEach(function(d){d.classList.remove("is-active"),d.setAttribute("aria-checked","false"),d.setAttribute("tabindex","-1")}),s.classList.add("is-active"),s.setAttribute("aria-checked","true"),s.setAttribute("tabindex","0"),n(l,i),localStorage.setItem("accent-colors",JSON.stringify({primary:l,accent:i})),T("Accent color changed to "+s.getAttribute("aria-label")),o()}c.forEach(function(s,l){s.addEventListener("click",function(){u(this)}),s.addEventListener("keydown",function(i){var d;if(i.key==="ArrowRight"||i.key==="ArrowDown")i.preventDefault(),d=(l+1)%c.length;else if(i.key==="ArrowLeft"||i.key==="ArrowUp")i.preventDefault(),d=(l-1+c.length)%c.length;else if(i.key==="Enter"||i.key===" "){i.preventDefault(),u(this);return}else return;c[l].setAttribute("tabindex","-1"),c[d].setAttribute("tabindex","0"),c[d].focus()})});var m=localStorage.getItem("accent-colors");if(m)try{var f=JSON.parse(m);n(f.primary,f.accent),c.forEach(function(s){s.getAttribute("data-primary")===f.primary&&s.getAttribute("data-accent")===f.accent&&s.classList.add("is-active")})}catch{}}var L,w;function H(){var t=document.querySelectorAll('a[href$=".jpg"], a[href$=".jpeg"], a[href$=".JPG"], a[href$=".png"], a[href$=".gif"], a[href$=".webp"]');if(t.length===0)return;var e=0,r=Array.from(t),n=document.querySelector(".image-lightbox");if(!n){n=document.createElement("dialog"),n.className="image-lightbox",n.innerHTML='<button class="lightbox-prev" aria-label="Previous image">&#8249;</button><img src="" alt="Lightbox image"><button class="lightbox-next" aria-label="Next image">&#8250;</button><button class="lightbox-close" aria-label="Close">&times;</button><div class="lightbox-counter"></div>',document.body.appendChild(n),n.querySelector("img").addEventListener("error",function(){this.alt="Image could not be loaded",this.style.minWidth="300px",this.style.minHeight="200px",this.style.display="flex",this.style.alignItems="center",this.style.background="rgba(255,255,255,0.1)"});var a=document.createElement("style");a.textContent=".image-lightbox { border: none; padding: 0; background: rgba(0,0,0,0.9); max-width: 95vw; max-height: 95vh; position: relative; }.image-lightbox::backdrop { background: rgba(0,0,0,0.8); }.image-lightbox img { max-width: 90vw; max-height: 90vh; object-fit: contain; display: block; }.image-lightbox .lightbox-close { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 24px; cursor: pointer; line-height: 1; }.image-lightbox .lightbox-close:hover { background: #fff; }.image-lightbox .lightbox-prev, .image-lightbox .lightbox-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 28px; cursor: pointer; line-height: 1; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }.image-lightbox .lightbox-prev:hover, .image-lightbox .lightbox-next:hover { background: #fff; }.image-lightbox .lightbox-prev { left: 10px; }.image-lightbox .lightbox-next { right: 10px; }.image-lightbox .lightbox-prev[hidden], .image-lightbox .lightbox-next[hidden] { display: none; }.image-lightbox .lightbox-counter { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.7); font-size: 0.85rem; }",document.head.appendChild(a),n.querySelector(".lightbox-close").addEventListener("click",function(){n.close()}),n.addEventListener("click",function(i){i.target===n&&n.close()});var c=n.querySelector(".lightbox-prev"),u=n.querySelector(".lightbox-next");c.addEventListener("click",function(i){i.stopPropagation(),L&&L()}),u.addEventListener("click",function(i){i.stopPropagation(),w&&w()}),n.addEventListener("keydown",function(i){i.key==="ArrowLeft"?(i.preventDefault(),L&&L()):i.key==="ArrowRight"&&(i.preventDefault(),w&&w())})}var o=n.querySelector("img"),c=n.querySelector(".lightbox-prev"),u=n.querySelector(".lightbox-next"),m=n.querySelector(".lightbox-counter");function f(s){e=s,o.style.minWidth="",o.style.minHeight="",o.style.background="",o.src=r[s].href;var l=r[s].querySelector("img");o.alt=l&&l.alt?l.alt:"Image "+(s+1);var i=r.length>1;c.hidden=!i,u.hidden=!i,m.textContent=i?s+1+" / "+r.length:""}L=function(){f((e-1+r.length)%r.length)},w=function(){f((e+1)%r.length)},r.forEach(function(s,l){s.addEventListener("click",function(i){i.preventDefault(),f(l),n.showModal()})})}var b=null,S=null,k=null;function M(){if(b&&(b.disconnect(),b=null),window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;var t={threshold:.1,rootMargin:"0px 0px -50px 0px"};b=new IntersectionObserver(function(n){n.forEach(function(a){a.isIntersecting&&(a.target.classList.add("is-visible"),b.unobserve(a.target))})},t);let e=document.querySelectorAll(".archive__item, .page__content > h2, .page__content > h3, .page__content > p, .page__content > ul, .page__content > ol, .author__urls li, .feature__item, .cert-card, .contact-card, .career-timeline__milestone, .cv-timeline-item, .cv-edu-card, .cv-skill-tag, .github-stats > a"),r=new Map;e.forEach(n=>{if(n.classList.contains("reveal")||n.classList.contains("reveal--left")||n.classList.contains("reveal--right")){b.observe(n);return}var a=n.matches(".cert-card, .contact-card, .career-timeline__milestone, .archive__item, .cv-edu-card, .cv-timeline-item");if(a&&n.parentElement){var o=n.parentElement,c=r.get(o)||0;r.set(o,c+1),n.style.transitionDelay=c*.08+"s",c%2===0?n.classList.add("reveal--left"):n.classList.add("reveal--right")}else if(n.classList.add("reveal"),n.matches(".author__urls li, .cv-skill-tag")){var u=n.parentElement?Array.from(n.parentElement.children):[],m=u.indexOf(n);n.style.transitionDelay=m*.05+"s"}b.observe(n)})}function R(){let t=document.querySelector(".scroll-progress"),e=document.querySelector(".masthead");if(!t)return;let r=!1,n=()=>{let a=window.scrollY,o=document.documentElement.scrollHeight-window.innerHeight,c=o>0?a/o*100:0;t.style.width=`${c}%`,e&&e.classList.toggle("is-scrolled",a>10),r=!1};window.addEventListener("scroll",()=>{r||(requestAnimationFrame(n),r=!0)},{passive:!0}),n()}function D(){var t=document.querySelector(".scroll-to-top");if(t){var e=300,r=!1,n=function(){window.scrollY>e?t.classList.add("is-visible"):t.classList.remove("is-visible"),r=!1};window.addEventListener("scroll",function(){r||(requestAnimationFrame(n),r=!0)},{passive:!0}),t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),n()}}function K(){S&&(S.disconnect(),S=null),k&&(k.abort(),k=null);var t=document.querySelector(".floating-cta");if(t){k=new AbortController;var e=k.signal,r=600,n=!1,a=!1,o=document.querySelector(".page__footer");o&&(S=new IntersectionObserver(function(u){a=u[0].isIntersecting,c()},{threshold:.1}),S.observe(o));var c=function(){window.scrollY>r&&window.innerWidth<925&&!a?t.classList.add("is-visible"):t.classList.remove("is-visible"),n=!1};window.addEventListener("scroll",function(){n||(requestAnimationFrame(c),n=!0)},{passive:!0,signal:e}),window.addEventListener("resize",function(){n||(requestAnimationFrame(c),n=!0)},{passive:!0,signal:e}),c()}}function N(){let t=document.querySelector(".author__urls-wrapper"),e=document.querySelector(".author__urls"),r=document.querySelector(".author__urls-wrapper button"),n=()=>{if(!e)return;let a=r!==null,o=a&&r.offsetParent!==null;!a||a&&!o?e.style.display="":e.style.display="none"};n(),window.addEventListener("resize",n),r&&e&&r.addEventListener("click",function(){let a=e.style.display==="none"||getComputedStyle(e).display==="none";e.style.display=a?"block":"none",this.classList.toggle("open"),this.setAttribute("aria-expanded",String(a))}),j()}var Y=925,g={STICK_TOP:"STICK_TOP",STICK_BOTTOM:"STICK_BOTTOM",FLOAT:"FLOAT"};function j(){let t=document.querySelector(".sidebar.sticky");if(!t)return;let e=document.getElementById("swup-sidebar");if(!e)return;let r=g.STICK_TOP,n=window.scrollY,a=!1,o=0,c=new AbortController,{signal:u}=c;e._stickyAbort&&e._stickyAbort.abort(),e._stickyAbort=c;function m(){let v=document.querySelector(".masthead");return v?v.offsetHeight:0}function f(){return Math.max(t.getBoundingClientRect().height,t.offsetHeight,t.scrollHeight)}function s(){return document.documentElement.clientHeight-f()}function l(){if(a=!1,window.innerWidth<Y){t.style.position="",t.style.top="";return}let v=document.documentElement.clientHeight,y=m();if(f()<=v-y){t.style.position="",t.style.top="",r=g.STICK_TOP;return}let h=window.scrollY,x=h>n,A=t.getBoundingClientRect();switch(r){case g.STICK_TOP:x&&(o=A.top-e.getBoundingClientRect().top,t.style.position="relative",t.style.top=o+"px",r=g.FLOAT);break;case g.STICK_BOTTOM:t.style.top=s()+"px",x||(o=A.top-e.getBoundingClientRect().top,t.style.position="relative",t.style.top=o+"px",r=g.FLOAT);break;case g.FLOAT:x?A.bottom<=v&&(t.style.position="sticky",t.style.top=s()+"px",r=g.STICK_BOTTOM):A.top>=y&&(t.style.position="sticky",t.style.top=y+"px",r=g.STICK_TOP);break}n=h}function i(){a||(requestAnimationFrame(l),a=!0)}function d(){r=g.STICK_TOP,t.style.position="",t.style.top="",n=window.scrollY}window.addEventListener("scroll",i,{signal:u,passive:!0}),window.addEventListener("resize",d,{signal:u}),document.fonts.ready.then(()=>{r===g.STICK_BOTTOM&&(t.style.top=s()+"px")})}function F(){var t=document.querySelector(".search-toggle"),e=document.querySelector(".search-overlay");if(!t||!e)return;var r=e.querySelector(".search-overlay__input"),n=e.querySelector(".search-overlay__results"),a=e.querySelector(".search-overlay__close"),o=null;function c(){e.hidden=!1,document.body.classList.add("overflow--hidden"),r.value="",n.innerHTML="",setTimeout(function(){r.focus()},50),m()}function u(){e.hidden=!0,document.body.classList.remove("overflow--hidden"),t.focus()}function m(){o||fetch("/search.json").then(function(i){return i.json()}).then(function(i){o=i}).catch(function(){o=[]})}function f(i){if(!o||!i){n.innerHTML="";return}var d=i.toLowerCase().split(/\s+/).filter(Boolean),v=o.filter(function(p){var h=(p.title+" "+p.excerpt).toLowerCase();return d.every(function(x){return h.indexOf(x)!==-1})});if(v.length===0){var y=document.documentElement.getAttribute("data-lang")||"en";n.innerHTML='<div class="search-no-results">'+(y==="es"?"No se encontraron resultados.":"No results found.")+"</div>";return}n.innerHTML=v.slice(0,10).map(function(p){var h=p.excerpt||"";return h.length>120&&(h=h.substring(0,120)+"..."),'<a class="search-result" href="'+encodeURI(p.url)+'"><div class="search-result__title">'+s(p.title)+"</div>"+(h?'<div class="search-result__excerpt">'+s(h)+"</div>":"")+"</a>"}).join("")}function s(i){var d=document.createElement("div");return d.textContent=i,d.innerHTML}var l;r.addEventListener("input",function(){clearTimeout(l);var i=r.value.trim();l=setTimeout(function(){f(i)},200)}),t.addEventListener("click",c),a.addEventListener("click",u),e.addEventListener("click",function(i){i.target===e&&u()}),document.addEventListener("keydown",function(i){i.key==="Escape"&&!e.hidden&&u(),(i.ctrlKey||i.metaKey)&&i.key==="k"&&(i.preventDefault(),e.hidden?c():u())})}function z(){var t=document.querySelector(".offline-banner");if(!t)return;function e(){navigator.onLine?t.hidden=!0:t.hidden=!1}window.addEventListener("online",e),window.addEventListener("offline",e),e()}var E=null;document.addEventListener("DOMContentLoaded",function(){if(I(),O(),P(),B(),z(),F(),q(),typeof Swup<"u"){var t=new Swup({containers:["#swup-sidebar","#swup-content"],animationSelector:'[class*="swup-transition-"]',cache:!0,animateHistoryBrowsing:!0});t.hooks.on("visit:start",function(){var e=document.querySelector(".scroll-progress");e&&(e.classList.add("progress-bar--loading"),e.style.width="80%")}),t.hooks.on("content:replace",function(){var e=document.querySelector(".scroll-progress");e&&(e.style.width="100%",setTimeout(function(){e.classList.remove("progress-bar--loading"),e.style.width="0%"},300))}),t.hooks.on("page:view",function(){q();var e=document.getElementById("main");e&&(e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}))})}});document.documentElement.style.scrollBehavior="smooth";function q(){E&&(E.disconnect(),E=null);var t=document.querySelector(".page__footer");if(t){var e=function(){document.body.style.marginBottom=t.offsetHeight+"px"};e(),typeof ResizeObserver<"u"&&(E=new ResizeObserver(e),E.observe(t))}N(),H(),M(),R(),C(),D(),K(),window.scrollTo(0,0)}window.initPageFeatures=q;})();
