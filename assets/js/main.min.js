(()=>{function w(){var e=document.querySelector(".nav-toggle"),t=document.querySelector(".site-nav");if(!e||!t)return;e.addEventListener("click",function(){var s=t.classList.toggle("is-open");e.setAttribute("aria-expanded",String(s)),e.classList.toggle("close",s),document.body.classList.toggle("overflow--hidden",s)});function r(){t.classList.remove("is-open"),e.setAttribute("aria-expanded","false"),e.classList.remove("close"),document.body.classList.remove("overflow--hidden")}var i=t.querySelectorAll(".nav-links a");i.forEach(function(s){s.addEventListener("click",r)});var o=window.matchMedia("(min-width: 768px)");o.addEventListener?o.addEventListener("change",function(){o.matches&&r()}):o.addListener&&o.addListener(function(){o.matches&&r()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&t.classList.contains("is-open")&&(r(),e.focus())})}function k(){let e=window.location.pathname;document.querySelectorAll(".nav-links a").forEach(r=>{r.classList.remove("active");let i=new URL(r.href).pathname;(e===i||i!=="/"&&e.startsWith(i))&&r.classList.add("active")})}function x(e){var t=document.getElementById("sr-announcer");t&&(t.textContent=e,setTimeout(function(){t.textContent=""},1e3))}function S(){let e=document.querySelector(".theme-toggle");if(!e)return;let t=o=>{document.querySelectorAll(".theme-img").forEach(s=>{s.src=s.getAttribute("data-"+o)||s.src})},r=o=>{document.documentElement.setAttribute("data-theme",o),localStorage.setItem("theme",o),t(o)};e.addEventListener("click",()=>{let s=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";r(s),x(s==="dark"?"Dark mode enabled":"Light mode enabled")}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{localStorage.getItem("theme")||r(o.matches?"dark":"light")});let i=document.documentElement.getAttribute("data-theme")||"light";t(i)}function E(){let e=document.querySelector(".lang-toggle");if(!e)return;let t=r=>{document.documentElement.setAttribute("data-lang",r),document.documentElement.setAttribute("lang",r),localStorage.setItem("lang",r)};e.addEventListener("click",()=>{let i=document.documentElement.getAttribute("data-lang")==="en"?"es":"en";t(i),x(i==="es"?"Idioma cambiado a espa\xF1ol":"Language changed to English")})}function T(){var e=document.querySelector(".color-toggle"),t=document.querySelector(".color-picker");if(!e||!t)return;function r(a){a=a.replace("#","");var d=parseInt(a.substring(0,2),16),n=parseInt(a.substring(2,4),16),l=parseInt(a.substring(4,6),16);return d+", "+n+", "+l}function i(a,d){var n=document.documentElement;n.style.setProperty("--color-primary",a),n.style.setProperty("--color-accent",d),n.style.setProperty("--color-primary-rgb",r(a)),n.style.setProperty("--color-accent-rgb",r(d)),n.style.setProperty("--gradient-primary","linear-gradient(135deg, "+a+", "+d+")"),n.style.setProperty("--gradient-subtle","linear-gradient(135deg, "+a+"14, "+d+"14)")}function o(){t.classList.add("is-open"),e.setAttribute("aria-expanded","true");var a=t.querySelector('[aria-checked="true"]')||c[0];a&&a.focus()}function s(){t.classList.remove("is-open"),e.setAttribute("aria-expanded","false")}e.addEventListener("click",function(a){a.stopPropagation(),t.classList.contains("is-open")?s():o()}),document.addEventListener("click",function(a){!t.contains(a.target)&&a.target!==e&&s()}),document.addEventListener("keydown",function(a){a.key==="Escape"&&t.classList.contains("is-open")&&(s(),e.focus())});var c=t.querySelectorAll(".color-swatch");function u(a){var d=a.getAttribute("data-primary"),n=a.getAttribute("data-accent");c.forEach(function(l){l.classList.remove("is-active"),l.setAttribute("aria-checked","false"),l.setAttribute("tabindex","-1")}),a.classList.add("is-active"),a.setAttribute("aria-checked","true"),a.setAttribute("tabindex","0"),i(d,n),localStorage.setItem("accent-colors",JSON.stringify({primary:d,accent:n})),x("Accent color changed to "+a.getAttribute("aria-label")),s()}c.forEach(function(a,d){a.addEventListener("click",function(){u(this)}),a.addEventListener("keydown",function(n){var l;if(n.key==="ArrowRight"||n.key==="ArrowDown")n.preventDefault(),l=(d+1)%c.length;else if(n.key==="ArrowLeft"||n.key==="ArrowUp")n.preventDefault(),l=(d-1+c.length)%c.length;else if(n.key==="Enter"||n.key===" "){n.preventDefault(),u(this);return}else return;c[d].setAttribute("tabindex","-1"),c[l].setAttribute("tabindex","0"),c[l].focus()})});var h=localStorage.getItem("accent-colors");if(h)try{var g=JSON.parse(h);i(g.primary,g.accent),c.forEach(function(a){a.getAttribute("data-primary")===g.primary&&a.getAttribute("data-accent")===g.accent&&a.classList.add("is-active")})}catch{}}function A(){var e=document.querySelectorAll('a[href$=".jpg"], a[href$=".jpeg"], a[href$=".JPG"], a[href$=".png"], a[href$=".gif"], a[href$=".webp"]');if(e.length===0)return;var t=0,r=Array.from(e),i=document.querySelector(".image-lightbox");if(!i){i=document.createElement("dialog"),i.className="image-lightbox",i.innerHTML='<button class="lightbox-prev" aria-label="Previous image">&#8249;</button><img src="" alt="Lightbox image"><button class="lightbox-next" aria-label="Next image">&#8250;</button><button class="lightbox-close" aria-label="Close">&times;</button><div class="lightbox-counter"></div>',document.body.appendChild(i);var o=document.createElement("style");o.textContent=".image-lightbox { border: none; padding: 0; background: rgba(0,0,0,0.9); max-width: 95vw; max-height: 95vh; position: relative; }.image-lightbox::backdrop { background: rgba(0,0,0,0.8); }.image-lightbox img { max-width: 90vw; max-height: 90vh; object-fit: contain; display: block; }.image-lightbox .lightbox-close { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 24px; cursor: pointer; line-height: 1; }.image-lightbox .lightbox-close:hover { background: #fff; }.image-lightbox .lightbox-prev, .image-lightbox .lightbox-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 28px; cursor: pointer; line-height: 1; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }.image-lightbox .lightbox-prev:hover, .image-lightbox .lightbox-next:hover { background: #fff; }.image-lightbox .lightbox-prev { left: 10px; }.image-lightbox .lightbox-next { right: 10px; }.image-lightbox .lightbox-prev[hidden], .image-lightbox .lightbox-next[hidden] { display: none; }.image-lightbox .lightbox-counter { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.7); font-size: 0.85rem; }",document.head.appendChild(o),i.querySelector(".lightbox-close").addEventListener("click",function(){i.close()}),i.addEventListener("click",function(n){n.target===i&&i.close()})}var s=i.querySelector("img"),c=i.querySelector(".lightbox-prev"),u=i.querySelector(".lightbox-next"),h=i.querySelector(".lightbox-counter");function g(n){t=n,s.src=r[n].href;var l=r.length>1;c.hidden=!l,u.hidden=!l,h.textContent=l?n+1+" / "+r.length:""}function a(){g((t-1+r.length)%r.length)}function d(){g((t+1)%r.length)}c.addEventListener("click",function(n){n.stopPropagation(),a()}),u.addEventListener("click",function(n){n.stopPropagation(),d()}),i.addEventListener("keydown",function(n){n.key==="ArrowLeft"?(n.preventDefault(),a()):n.key==="ArrowRight"&&(n.preventDefault(),d())}),r.forEach(function(n,l){n.addEventListener("click",function(m){m.preventDefault(),g(l),i.showModal()})})}function _(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let e={threshold:.1,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(o=>{o.forEach(s=>{s.isIntersecting&&(s.target.classList.add("is-visible"),t.unobserve(s.target))})},e),r=document.querySelectorAll(".archive__item, .page__content > h2, .page__content > h3, .page__content > p, .page__content > ul, .page__content > ol, .author__urls li, .feature__item, .highlight-card, .cert-card, .contact-card, .cv-timeline-item, .cv-edu-card, .cv-skill-tag, .github-stats > a, .bento-grid > *"),i=new Map;r.forEach(o=>{if(o.classList.contains("reveal")||o.classList.contains("reveal--left")||o.classList.contains("reveal--right")){t.observe(o);return}var s=o.matches(".highlight-card, .cert-card, .contact-card, .archive__item, .cv-edu-card, .cv-timeline-item, .bento-grid > *");if(s&&o.parentElement){var c=o.parentElement,u=i.get(c)||0;i.set(c,u+1),o.style.transitionDelay=u*.08+"s",u%2===0?o.classList.add("reveal--left"):o.classList.add("reveal--right")}else if(o.classList.add("reveal"),o.matches(".author__urls li, .cv-skill-tag")){var h=o.parentElement?Array.from(o.parentElement.children):[],g=h.indexOf(o);o.style.transitionDelay=g*.05+"s"}t.observe(o)})}function O(){let e=document.querySelector(".scroll-progress"),t=document.querySelector(".masthead");if(!e)return;let r=!1,i=()=>{let o=window.scrollY,s=document.documentElement.scrollHeight-window.innerHeight,c=s>0?o/s*100:0;e.style.width=`${c}%`,t&&t.classList.toggle("is-scrolled",o>10),r=!1};window.addEventListener("scroll",()=>{r||(requestAnimationFrame(i),r=!0)},{passive:!0}),i()}function q(){var e=document.querySelector(".scroll-to-top");if(e){var t=300,r=!1,i=function(){window.scrollY>t?e.classList.add("is-visible"):e.classList.remove("is-visible"),r=!1};window.addEventListener("scroll",function(){r||(requestAnimationFrame(i),r=!0)},{passive:!0}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),i()}}function C(){let e=document.querySelector(".author__urls-wrapper"),t=document.querySelector(".author__urls"),r=document.querySelector(".author__urls-wrapper button"),i=()=>{if(!t)return;let o=r!==null,s=o&&r.offsetParent!==null;!o||o&&!s?t.style.display="":t.style.display="none"};i(),window.addEventListener("resize",i),r&&t&&r.addEventListener("click",function(){let o=t.style.display==="none"||getComputedStyle(t).display==="none";t.style.display=o?"block":"none",this.classList.toggle("open"),this.setAttribute("aria-expanded",String(o))}),B()}var H=925,f={STICK_TOP:"STICK_TOP",STICK_BOTTOM:"STICK_BOTTOM",FLOAT:"FLOAT"};function B(){let e=document.querySelector(".sidebar.sticky");if(!e)return;let t=document.getElementById("swup-sidebar");if(!t)return;let r=f.STICK_TOP,i=window.scrollY,o=!1,s=0,c=new AbortController,{signal:u}=c;t._stickyAbort&&t._stickyAbort.abort(),t._stickyAbort=c;function h(){let m=document.querySelector(".masthead");return m?m.offsetHeight:0}function g(){return Math.max(e.getBoundingClientRect().height,e.offsetHeight,e.scrollHeight)}function a(){return document.documentElement.clientHeight-g()}function d(){if(o=!1,window.innerWidth<H){e.style.position="",e.style.top="";return}let m=document.documentElement.clientHeight,p=h();if(g()<=m-p){e.style.position="",e.style.top="",r=f.STICK_TOP;return}let b=window.scrollY,L=b>i,y=e.getBoundingClientRect();switch(r){case f.STICK_TOP:L&&(s=y.top-t.getBoundingClientRect().top,e.style.position="relative",e.style.top=s+"px",r=f.FLOAT);break;case f.STICK_BOTTOM:e.style.top=a()+"px",L||(s=y.top-t.getBoundingClientRect().top,e.style.position="relative",e.style.top=s+"px",r=f.FLOAT);break;case f.FLOAT:L?y.bottom<=m&&(e.style.position="sticky",e.style.top=a()+"px",r=f.STICK_BOTTOM):y.top>=p&&(e.style.position="sticky",e.style.top=p+"px",r=f.STICK_TOP);break}i=b}function n(){o||(requestAnimationFrame(d),o=!0)}function l(){r=f.STICK_TOP,e.style.position="",e.style.top="",i=window.scrollY}window.addEventListener("scroll",n,{signal:u,passive:!0}),window.addEventListener("resize",l,{signal:u}),document.fonts.ready.then(()=>{r===f.STICK_BOTTOM&&(e.style.top=a()+"px")})}function I(){var e=document.querySelector(".search-toggle"),t=document.querySelector(".search-overlay");if(!e||!t)return;var r=t.querySelector(".search-overlay__input"),i=t.querySelector(".search-overlay__results"),o=t.querySelector(".search-overlay__close"),s=null;function c(){t.hidden=!1,document.body.classList.add("overflow--hidden"),r.value="",i.innerHTML="",setTimeout(function(){r.focus()},50),h()}function u(){t.hidden=!0,document.body.classList.remove("overflow--hidden"),e.focus()}function h(){s||fetch("/search.json").then(function(n){return n.json()}).then(function(n){s=n}).catch(function(){s=[]})}function g(n){if(!s||!n){i.innerHTML="";return}var l=n.toLowerCase().split(/\s+/).filter(Boolean),m=s.filter(function(p){var v=(p.title+" "+p.excerpt).toLowerCase();return l.every(function(b){return v.indexOf(b)!==-1})});if(m.length===0){i.innerHTML='<div class="search-no-results">No results found.</div>';return}i.innerHTML=m.slice(0,10).map(function(p){var v=p.excerpt||"";return v.length>120&&(v=v.substring(0,120)+"..."),'<a class="search-result" href="'+encodeURI(p.url)+'"><div class="search-result__title">'+a(p.title)+"</div>"+(v?'<div class="search-result__excerpt">'+a(v)+"</div>":"")+"</a>"}).join("")}function a(n){var l=document.createElement("div");return l.textContent=n,l.innerHTML}var d;r.addEventListener("input",function(){clearTimeout(d);var n=r.value.trim();d=setTimeout(function(){g(n)},200)}),e.addEventListener("click",c),o.addEventListener("click",u),t.addEventListener("click",function(n){n.target===t&&u()}),document.addEventListener("keydown",function(n){n.key==="Escape"&&!t.hidden&&u(),(n.ctrlKey||n.metaKey)&&n.key==="k"&&(n.preventDefault(),t.hidden?c():u())})}function P(){var e=document.querySelector(".offline-banner");if(!e)return;function t(){navigator.onLine?e.hidden=!0:e.hidden=!1}window.addEventListener("online",t),window.addEventListener("offline",t),t()}document.addEventListener("DOMContentLoaded",function(){w(),S(),E(),T(),P(),I(),M()});document.documentElement.style.scrollBehavior="smooth";function M(){let e=document.querySelector(".page__footer");if(e){let t=()=>{document.body.style.marginBottom=e.offsetHeight+"px"};t(),typeof ResizeObserver<"u"?new ResizeObserver(t).observe(e):window.addEventListener("resize",t)}C(),A(),_(),O(),k(),q(),window.scrollTo(0,0)}window.initPageFeatures=M;})();
