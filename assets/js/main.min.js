(()=>{function b(){var r=document.querySelector(".nav-toggle"),e=document.querySelector(".site-nav");if(!r||!e)return;r.addEventListener("click",function(){var s=e.classList.toggle("is-open");r.setAttribute("aria-expanded",String(s)),r.classList.toggle("close",s),document.body.classList.toggle("overflow--hidden",s)});function i(){e.classList.remove("is-open"),r.setAttribute("aria-expanded","false"),r.classList.remove("close"),document.body.classList.remove("overflow--hidden")}var o=e.querySelectorAll(".nav-links a");o.forEach(function(s){s.addEventListener("click",i)});var n=window.matchMedia("(min-width: 768px)");n.addEventListener?n.addEventListener("change",function(){n.matches&&i()}):n.addListener&&n.addListener(function(){n.matches&&i()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&e.classList.contains("is-open")&&(i(),r.focus())})}function y(){let r=window.location.pathname;document.querySelectorAll(".nav-links a").forEach(i=>{i.classList.remove("active");let o=new URL(i.href).pathname;(r===o||o!=="/"&&r.startsWith(o))&&i.classList.add("active")})}function p(r){var e=document.getElementById("sr-announcer");e&&(e.textContent=r,setTimeout(function(){e.textContent=""},1e3))}function x(){let r=document.querySelector(".theme-toggle");if(!r)return;let e=n=>{document.querySelectorAll(".theme-img").forEach(s=>{s.src=s.getAttribute("data-"+n)||s.src})},i=n=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),e(n)};r.addEventListener("click",()=>{let s=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";i(s),p(s==="dark"?"Dark mode enabled":"Light mode enabled")}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",n=>{localStorage.getItem("theme")||i(n.matches?"dark":"light")});let o=document.documentElement.getAttribute("data-theme")||"light";e(o)}function L(){let r=document.querySelector(".lang-toggle");if(!r)return;let e=i=>{document.documentElement.setAttribute("data-lang",i),document.documentElement.setAttribute("lang",i),localStorage.setItem("lang",i)};r.addEventListener("click",()=>{let o=document.documentElement.getAttribute("data-lang")==="en"?"es":"en";e(o),p(o==="es"?"Idioma cambiado a espa\xF1ol":"Language changed to English")})}function k(){var r=document.querySelector(".color-toggle"),e=document.querySelector(".color-picker");if(!r||!e)return;function i(a){a=a.replace("#","");var d=parseInt(a.substring(0,2),16),t=parseInt(a.substring(2,4),16),l=parseInt(a.substring(4,6),16);return d+", "+t+", "+l}function o(a,d){var t=document.documentElement;t.style.setProperty("--color-primary",a),t.style.setProperty("--color-accent",d),t.style.setProperty("--color-primary-rgb",i(a)),t.style.setProperty("--color-accent-rgb",i(d)),t.style.setProperty("--gradient-primary","linear-gradient(135deg, "+a+", "+d+")"),t.style.setProperty("--gradient-subtle","linear-gradient(135deg, "+a+"14, "+d+"14)")}function n(){e.classList.add("is-open"),r.setAttribute("aria-expanded","true");var a=e.querySelector('[aria-checked="true"]')||c[0];a&&a.focus()}function s(){e.classList.remove("is-open"),r.setAttribute("aria-expanded","false")}r.addEventListener("click",function(a){a.stopPropagation(),e.classList.contains("is-open")?s():n()}),document.addEventListener("click",function(a){!e.contains(a.target)&&a.target!==r&&s()}),document.addEventListener("keydown",function(a){a.key==="Escape"&&e.classList.contains("is-open")&&(s(),r.focus())});var c=e.querySelectorAll(".color-swatch");function u(a){var d=a.getAttribute("data-primary"),t=a.getAttribute("data-accent");c.forEach(function(l){l.classList.remove("is-active"),l.setAttribute("aria-checked","false"),l.setAttribute("tabindex","-1")}),a.classList.add("is-active"),a.setAttribute("aria-checked","true"),a.setAttribute("tabindex","0"),o(d,t),localStorage.setItem("accent-colors",JSON.stringify({primary:d,accent:t})),p("Accent color changed to "+a.getAttribute("aria-label")),s()}c.forEach(function(a,d){a.addEventListener("click",function(){u(this)}),a.addEventListener("keydown",function(t){var l;if(t.key==="ArrowRight"||t.key==="ArrowDown")t.preventDefault(),l=(d+1)%c.length;else if(t.key==="ArrowLeft"||t.key==="ArrowUp")t.preventDefault(),l=(d-1+c.length)%c.length;else if(t.key==="Enter"||t.key===" "){t.preventDefault(),u(this);return}else return;c[d].setAttribute("tabindex","-1"),c[l].setAttribute("tabindex","0"),c[l].focus()})});var f=localStorage.getItem("accent-colors");if(f)try{var g=JSON.parse(f);o(g.primary,g.accent),c.forEach(function(a){a.getAttribute("data-primary")===g.primary&&a.getAttribute("data-accent")===g.accent&&a.classList.add("is-active")})}catch{}}function w(){var r=document.querySelectorAll('a[href$=".jpg"], a[href$=".jpeg"], a[href$=".JPG"], a[href$=".png"], a[href$=".gif"], a[href$=".webp"]');if(r.length===0)return;var e=0,i=Array.from(r),o=document.querySelector(".image-lightbox");if(!o){o=document.createElement("dialog"),o.className="image-lightbox",o.innerHTML='<button class="lightbox-prev" aria-label="Previous image">&#8249;</button><img src="" alt="Lightbox image"><button class="lightbox-next" aria-label="Next image">&#8250;</button><button class="lightbox-close" aria-label="Close">&times;</button><div class="lightbox-counter"></div>',document.body.appendChild(o);var n=document.createElement("style");n.textContent=".image-lightbox { border: none; padding: 0; background: rgba(0,0,0,0.9); max-width: 95vw; max-height: 95vh; position: relative; }.image-lightbox::backdrop { background: rgba(0,0,0,0.8); }.image-lightbox img { max-width: 90vw; max-height: 90vh; object-fit: contain; display: block; }.image-lightbox .lightbox-close { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 24px; cursor: pointer; line-height: 1; }.image-lightbox .lightbox-close:hover { background: #fff; }.image-lightbox .lightbox-prev, .image-lightbox .lightbox-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 28px; cursor: pointer; line-height: 1; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }.image-lightbox .lightbox-prev:hover, .image-lightbox .lightbox-next:hover { background: #fff; }.image-lightbox .lightbox-prev { left: 10px; }.image-lightbox .lightbox-next { right: 10px; }.image-lightbox .lightbox-prev[hidden], .image-lightbox .lightbox-next[hidden] { display: none; }.image-lightbox .lightbox-counter { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.7); font-size: 0.85rem; }",document.head.appendChild(n),o.querySelector(".lightbox-close").addEventListener("click",function(){o.close()}),o.addEventListener("click",function(t){t.target===o&&o.close()})}var s=o.querySelector("img"),c=o.querySelector(".lightbox-prev"),u=o.querySelector(".lightbox-next"),f=o.querySelector(".lightbox-counter");function g(t){e=t,s.src=i[t].href;var l=i.length>1;c.hidden=!l,u.hidden=!l,f.textContent=l?t+1+" / "+i.length:""}function a(){g((e-1+i.length)%i.length)}function d(){g((e+1)%i.length)}c.addEventListener("click",function(t){t.stopPropagation(),a()}),u.addEventListener("click",function(t){t.stopPropagation(),d()}),o.addEventListener("keydown",function(t){t.key==="ArrowLeft"?(t.preventDefault(),a()):t.key==="ArrowRight"&&(t.preventDefault(),d())}),i.forEach(function(t,l){t.addEventListener("click",function(v){v.preventDefault(),g(l),o.showModal()})})}function E(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let r={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&(s.target.classList.add("is-visible"),e.unobserve(s.target))})},r),i=document.querySelectorAll(".archive__item, .page__content > h2, .page__content > h3, .page__content > p, .page__content > ul, .page__content > ol, .author__urls li, .feature__item, .highlight-card, .cert-card, .contact-card, .cv-timeline-item, .cv-edu-card, .cv-skill-tag, .github-stats > a, .bento-grid > *"),o=new Map;i.forEach(n=>{if(n.classList.contains("reveal")||n.classList.contains("reveal--left")||n.classList.contains("reveal--right")){e.observe(n);return}var s=n.matches(".highlight-card, .cert-card, .contact-card, .archive__item, .cv-edu-card, .cv-timeline-item, .bento-grid > *");if(s&&n.parentElement){var c=n.parentElement,u=o.get(c)||0;o.set(c,u+1),n.style.transitionDelay=u*.08+"s",u%2===0?n.classList.add("reveal--left"):n.classList.add("reveal--right")}else if(n.classList.add("reveal"),n.matches(".author__urls li, .cv-skill-tag")){var f=n.parentElement?Array.from(n.parentElement.children):[],g=f.indexOf(n);n.style.transitionDelay=g*.05+"s"}e.observe(n)})}function S(){let r=document.querySelector(".scroll-progress"),e=document.querySelector(".masthead");if(!r)return;let i=!1,o=()=>{let n=window.scrollY,s=document.documentElement.scrollHeight-window.innerHeight,c=s>0?n/s*100:0;r.style.width=`${c}%`,e&&e.classList.toggle("is-scrolled",n>10),i=!1};window.addEventListener("scroll",()=>{i||(requestAnimationFrame(o),i=!0)},{passive:!0}),o()}function A(){var r=document.querySelector(".scroll-to-top");if(r){var e=300,i=!1,o=function(){window.scrollY>e?r.classList.add("is-visible"):r.classList.remove("is-visible"),i=!1};window.addEventListener("scroll",function(){i||(requestAnimationFrame(o),i=!0)},{passive:!0}),r.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),o()}}function _(){let r=document.querySelector(".author__urls-wrapper"),e=document.querySelector(".author__urls"),i=document.querySelector(".author__urls-wrapper button"),o=()=>{if(!e)return;let n=i!==null,s=n&&i.offsetParent!==null;!n||n&&!s?e.style.display="":e.style.display="none"};o(),window.addEventListener("resize",o),i&&e&&i.addEventListener("click",function(){let n=e.style.display==="none"||getComputedStyle(e).display==="none";e.style.display=n?"block":"none",this.classList.toggle("open"),this.setAttribute("aria-expanded",String(n))})}function q(){var r=document.querySelector(".search-toggle"),e=document.querySelector(".search-overlay");if(!r||!e)return;var i=e.querySelector(".search-overlay__input"),o=e.querySelector(".search-overlay__results"),n=e.querySelector(".search-overlay__close"),s=null;function c(){e.hidden=!1,document.body.classList.add("overflow--hidden"),i.value="",o.innerHTML="",setTimeout(function(){i.focus()},50),f()}function u(){e.hidden=!0,document.body.classList.remove("overflow--hidden"),r.focus()}function f(){s||fetch("/search.json").then(function(t){return t.json()}).then(function(t){s=t}).catch(function(){s=[]})}function g(t){if(!s||!t){o.innerHTML="";return}var l=t.toLowerCase().split(/\s+/).filter(Boolean),v=s.filter(function(m){var h=(m.title+" "+m.excerpt).toLowerCase();return l.every(function(C){return h.indexOf(C)!==-1})});if(v.length===0){o.innerHTML='<div class="search-no-results">No results found.</div>';return}o.innerHTML=v.slice(0,10).map(function(m){var h=m.excerpt||"";return h.length>120&&(h=h.substring(0,120)+"..."),'<a class="search-result" href="'+m.url+'"><div class="search-result__title">'+a(m.title)+"</div>"+(h?'<div class="search-result__excerpt">'+a(h)+"</div>":"")+"</a>"}).join("")}function a(t){var l=document.createElement("div");return l.textContent=t,l.innerHTML}var d;i.addEventListener("input",function(){clearTimeout(d);var t=i.value.trim();d=setTimeout(function(){g(t)},200)}),r.addEventListener("click",c),n.addEventListener("click",u),e.addEventListener("click",function(t){t.target===e&&u()}),document.addEventListener("keydown",function(t){t.key==="Escape"&&!e.hidden&&u(),(t.ctrlKey||t.metaKey)&&t.key==="k"&&(t.preventDefault(),e.hidden?c():u())})}function T(){var r=document.querySelector(".offline-banner");if(!r)return;function e(){navigator.onLine?r.hidden=!0:r.hidden=!1}window.addEventListener("online",e),window.addEventListener("offline",e),e()}document.addEventListener("DOMContentLoaded",function(){b(),x(),L(),k(),T(),q(),P()});document.documentElement.style.scrollBehavior="smooth";function P(){let r=document.querySelector(".page__footer");if(r){let e=()=>{document.body.style.marginBottom=r.offsetHeight+"px"};e(),typeof ResizeObserver<"u"?new ResizeObserver(e).observe(r):window.addEventListener("resize",e)}_(),w(),E(),S(),y(),A(),window.scrollTo(0,0)}window.initPageFeatures=P;})();
