(()=>{function S(){var t=document.querySelector(".nav-toggle"),e=document.querySelector(".site-nav");if(!t||!e)return;t.addEventListener("click",function(){var a=e.classList.toggle("is-open");t.setAttribute("aria-expanded",String(a)),t.classList.toggle("close",a),document.body.classList.toggle("overflow--hidden",a)});function n(){e.classList.remove("is-open"),t.setAttribute("aria-expanded","false"),t.classList.remove("close"),document.body.classList.remove("overflow--hidden")}var o=e.querySelectorAll(".nav-links a");o.forEach(function(a){a.addEventListener("click",n)});var i=window.matchMedia("(min-width: 768px)");i.addEventListener?i.addEventListener("change",function(){i.matches&&n()}):i.addListener&&i.addListener(function(){i.matches&&n()}),document.addEventListener("keydown",function(a){a.key==="Escape"&&e.classList.contains("is-open")&&(n(),t.focus())})}function k(){let t=window.location.pathname;document.querySelectorAll(".nav-links a").forEach(n=>{n.classList.remove("active");let o=new URL(n.href).pathname;(t===o||o!=="/"&&t.startsWith(o))&&n.classList.add("active")})}function x(t){var e=document.getElementById("sr-announcer");e&&(e.textContent=t,setTimeout(function(){e.textContent=""},1e3))}function E(){let t=document.querySelector(".theme-toggle");if(!t)return;let e=i=>{document.querySelectorAll(".theme-img").forEach(a=>{a.src=a.getAttribute("data-"+i)||a.src})},n=i=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i),e(i)};t.addEventListener("click",()=>{let a=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";n(a),x(a==="dark"?"Dark mode enabled":"Light mode enabled")}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{localStorage.getItem("theme")||n(i.matches?"dark":"light")});let o=document.documentElement.getAttribute("data-theme")||"light";e(o)}function T(){let t=document.querySelector(".lang-toggle");if(!t)return;let e=n=>{document.documentElement.setAttribute("data-lang",n),document.documentElement.setAttribute("lang",n),localStorage.setItem("lang",n)};t.addEventListener("click",()=>{let o=document.documentElement.getAttribute("data-lang")==="en"?"es":"en";e(o),x(o==="es"?"Idioma cambiado a espa\xF1ol":"Language changed to English")})}function _(){var t=document.querySelector(".color-toggle"),e=document.querySelector(".color-picker");if(!t||!e)return;function n(s){s=s.replace("#","");var d=parseInt(s.substring(0,2),16),r=parseInt(s.substring(2,4),16),l=parseInt(s.substring(4,6),16);return d+", "+r+", "+l}function o(s,d){var r=document.documentElement;r.style.setProperty("--color-primary",s),r.style.setProperty("--color-accent",d),r.style.setProperty("--color-primary-rgb",n(s)),r.style.setProperty("--color-accent-rgb",n(d)),r.style.setProperty("--gradient-primary","linear-gradient(135deg, "+s+", "+d+")"),r.style.setProperty("--gradient-subtle","linear-gradient(135deg, "+s+"14, "+d+"14)")}function i(){e.classList.add("is-open"),t.setAttribute("aria-expanded","true");var s=e.querySelector('[aria-checked="true"]')||c[0];s&&s.focus()}function a(){e.classList.remove("is-open"),t.setAttribute("aria-expanded","false")}t.addEventListener("click",function(s){s.stopPropagation(),e.classList.contains("is-open")?a():i()}),document.addEventListener("click",function(s){!e.contains(s.target)&&s.target!==t&&a()}),document.addEventListener("keydown",function(s){s.key==="Escape"&&e.classList.contains("is-open")&&(a(),t.focus())});var c=e.querySelectorAll(".color-swatch");function u(s){var d=s.getAttribute("data-primary"),r=s.getAttribute("data-accent");c.forEach(function(l){l.classList.remove("is-active"),l.setAttribute("aria-checked","false"),l.setAttribute("tabindex","-1")}),s.classList.add("is-active"),s.setAttribute("aria-checked","true"),s.setAttribute("tabindex","0"),o(d,r),localStorage.setItem("accent-colors",JSON.stringify({primary:d,accent:r})),x("Accent color changed to "+s.getAttribute("aria-label")),a()}c.forEach(function(s,d){s.addEventListener("click",function(){u(this)}),s.addEventListener("keydown",function(r){var l;if(r.key==="ArrowRight"||r.key==="ArrowDown")r.preventDefault(),l=(d+1)%c.length;else if(r.key==="ArrowLeft"||r.key==="ArrowUp")r.preventDefault(),l=(d-1+c.length)%c.length;else if(r.key==="Enter"||r.key===" "){r.preventDefault(),u(this);return}else return;c[d].setAttribute("tabindex","-1"),c[l].setAttribute("tabindex","0"),c[l].focus()})});var m=localStorage.getItem("accent-colors");if(m)try{var f=JSON.parse(m);o(f.primary,f.accent),c.forEach(function(s){s.getAttribute("data-primary")===f.primary&&s.getAttribute("data-accent")===f.accent&&s.classList.add("is-active")})}catch{}}function A(){var t=document.querySelectorAll('a[href$=".jpg"], a[href$=".jpeg"], a[href$=".JPG"], a[href$=".png"], a[href$=".gif"], a[href$=".webp"]');if(t.length===0)return;var e=0,n=Array.from(t),o=document.querySelector(".image-lightbox");if(!o){o=document.createElement("dialog"),o.className="image-lightbox",o.innerHTML='<button class="lightbox-prev" aria-label="Previous image">&#8249;</button><img src="" alt="Lightbox image"><button class="lightbox-next" aria-label="Next image">&#8250;</button><button class="lightbox-close" aria-label="Close">&times;</button><div class="lightbox-counter"></div>',document.body.appendChild(o);var i=document.createElement("style");i.textContent=".image-lightbox { border: none; padding: 0; background: rgba(0,0,0,0.9); max-width: 95vw; max-height: 95vh; position: relative; }.image-lightbox::backdrop { background: rgba(0,0,0,0.8); }.image-lightbox img { max-width: 90vw; max-height: 90vh; object-fit: contain; display: block; }.image-lightbox .lightbox-close { position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 24px; cursor: pointer; line-height: 1; }.image-lightbox .lightbox-close:hover { background: #fff; }.image-lightbox .lightbox-prev, .image-lightbox .lightbox-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.8); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 28px; cursor: pointer; line-height: 1; display: flex; align-items: center; justify-content: center; transition: background 0.2s; }.image-lightbox .lightbox-prev:hover, .image-lightbox .lightbox-next:hover { background: #fff; }.image-lightbox .lightbox-prev { left: 10px; }.image-lightbox .lightbox-next { right: 10px; }.image-lightbox .lightbox-prev[hidden], .image-lightbox .lightbox-next[hidden] { display: none; }.image-lightbox .lightbox-counter { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.7); font-size: 0.85rem; }",document.head.appendChild(i),o.querySelector(".lightbox-close").addEventListener("click",function(){o.close()}),o.addEventListener("click",function(r){r.target===o&&o.close()})}var a=o.querySelector("img"),c=o.querySelector(".lightbox-prev"),u=o.querySelector(".lightbox-next"),m=o.querySelector(".lightbox-counter");function f(r){e=r,a.src=n[r].href;var l=n.length>1;c.hidden=!l,u.hidden=!l,m.textContent=l?r+1+" / "+n.length:""}function s(){f((e-1+n.length)%n.length)}function d(){f((e+1)%n.length)}c.addEventListener("click",function(r){r.stopPropagation(),s()}),u.addEventListener("click",function(r){r.stopPropagation(),d()}),o.addEventListener("keydown",function(r){r.key==="ArrowLeft"?(r.preventDefault(),s()):r.key==="ArrowRight"&&(r.preventDefault(),d())}),n.forEach(function(r,l){r.addEventListener("click",function(h){h.preventDefault(),f(l),o.showModal()})})}function q(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let t={threshold:.1,rootMargin:"0px 0px -50px 0px"},e=new IntersectionObserver(i=>{i.forEach(a=>{a.isIntersecting&&(a.target.classList.add("is-visible"),e.unobserve(a.target))})},t),n=document.querySelectorAll(".archive__item, .page__content > h2, .page__content > h3, .page__content > p, .page__content > ul, .page__content > ol, .author__urls li, .feature__item, .cert-card, .contact-card, .career-timeline__milestone, .cv-timeline-item, .cv-edu-card, .cv-skill-tag, .github-stats > a"),o=new Map;n.forEach(i=>{if(i.classList.contains("reveal")||i.classList.contains("reveal--left")||i.classList.contains("reveal--right")){e.observe(i);return}var a=i.matches(".cert-card, .contact-card, .career-timeline__milestone, .archive__item, .cv-edu-card, .cv-timeline-item");if(a&&i.parentElement){var c=i.parentElement,u=o.get(c)||0;o.set(c,u+1),i.style.transitionDelay=u*.08+"s",u%2===0?i.classList.add("reveal--left"):i.classList.add("reveal--right")}else if(i.classList.add("reveal"),i.matches(".author__urls li, .cv-skill-tag")){var m=i.parentElement?Array.from(i.parentElement.children):[],f=m.indexOf(i);i.style.transitionDelay=f*.05+"s"}e.observe(i)})}function O(){let t=document.querySelector(".scroll-progress"),e=document.querySelector(".masthead");if(!t)return;let n=!1,o=()=>{let i=window.scrollY,a=document.documentElement.scrollHeight-window.innerHeight,c=a>0?i/a*100:0;t.style.width=`${c}%`,e&&e.classList.toggle("is-scrolled",i>10),n=!1};window.addEventListener("scroll",()=>{n||(requestAnimationFrame(o),n=!0)},{passive:!0}),o()}function C(){var t=document.querySelector(".scroll-to-top");if(t){var e=300,n=!1,o=function(){window.scrollY>e?t.classList.add("is-visible"):t.classList.remove("is-visible"),n=!1};window.addEventListener("scroll",function(){n||(requestAnimationFrame(o),n=!0)},{passive:!0}),t.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),o()}}function I(){var t=document.querySelector(".floating-cta");if(t){var e=600,n=!1,o=!1,i=document.querySelector(".page__footer");if(i){var a=new IntersectionObserver(function(u){o=u[0].isIntersecting,c()},{threshold:.1});a.observe(i)}var c=function(){window.scrollY>e&&window.innerWidth<925&&!o?t.classList.add("is-visible"):t.classList.remove("is-visible"),n=!1};window.addEventListener("scroll",function(){n||(requestAnimationFrame(c),n=!0)},{passive:!0}),window.addEventListener("resize",function(){n||(requestAnimationFrame(c),n=!0)},{passive:!0}),c()}}function P(){let t=document.querySelector(".author__urls-wrapper"),e=document.querySelector(".author__urls"),n=document.querySelector(".author__urls-wrapper button"),o=()=>{if(!e)return;let i=n!==null,a=i&&n.offsetParent!==null;!i||i&&!a?e.style.display="":e.style.display="none"};o(),window.addEventListener("resize",o),n&&e&&n.addEventListener("click",function(){let i=e.style.display==="none"||getComputedStyle(e).display==="none";e.style.display=i?"block":"none",this.classList.toggle("open"),this.setAttribute("aria-expanded",String(i))}),D()}var H=925,g={STICK_TOP:"STICK_TOP",STICK_BOTTOM:"STICK_BOTTOM",FLOAT:"FLOAT"};function D(){let t=document.querySelector(".sidebar.sticky");if(!t)return;let e=document.getElementById("swup-sidebar");if(!e)return;let n=g.STICK_TOP,o=window.scrollY,i=!1,a=0,c=new AbortController,{signal:u}=c;e._stickyAbort&&e._stickyAbort.abort(),e._stickyAbort=c;function m(){let h=document.querySelector(".masthead");return h?h.offsetHeight:0}function f(){return Math.max(t.getBoundingClientRect().height,t.offsetHeight,t.scrollHeight)}function s(){return document.documentElement.clientHeight-f()}function d(){if(i=!1,window.innerWidth<H){t.style.position="",t.style.top="";return}let h=document.documentElement.clientHeight,p=m();if(f()<=h-p){t.style.position="",t.style.top="",n=g.STICK_TOP;return}let b=window.scrollY,w=b>o,y=t.getBoundingClientRect();switch(n){case g.STICK_TOP:w&&(a=y.top-e.getBoundingClientRect().top,t.style.position="relative",t.style.top=a+"px",n=g.FLOAT);break;case g.STICK_BOTTOM:t.style.top=s()+"px",w||(a=y.top-e.getBoundingClientRect().top,t.style.position="relative",t.style.top=a+"px",n=g.FLOAT);break;case g.FLOAT:w?y.bottom<=h&&(t.style.position="sticky",t.style.top=s()+"px",n=g.STICK_BOTTOM):y.top>=p&&(t.style.position="sticky",t.style.top=p+"px",n=g.STICK_TOP);break}o=b}function r(){i||(requestAnimationFrame(d),i=!0)}function l(){n=g.STICK_TOP,t.style.position="",t.style.top="",o=window.scrollY}window.addEventListener("scroll",r,{signal:u,passive:!0}),window.addEventListener("resize",l,{signal:u}),document.fonts.ready.then(()=>{n===g.STICK_BOTTOM&&(t.style.top=s()+"px")})}function M(){var t=document.querySelector(".search-toggle"),e=document.querySelector(".search-overlay");if(!t||!e)return;var n=e.querySelector(".search-overlay__input"),o=e.querySelector(".search-overlay__results"),i=e.querySelector(".search-overlay__close"),a=null;function c(){e.hidden=!1,document.body.classList.add("overflow--hidden"),n.value="",o.innerHTML="",setTimeout(function(){n.focus()},50),m()}function u(){e.hidden=!0,document.body.classList.remove("overflow--hidden"),t.focus()}function m(){a||fetch("/search.json").then(function(r){return r.json()}).then(function(r){a=r}).catch(function(){a=[]})}function f(r){if(!a||!r){o.innerHTML="";return}var l=r.toLowerCase().split(/\s+/).filter(Boolean),h=a.filter(function(p){var v=(p.title+" "+p.excerpt).toLowerCase();return l.every(function(b){return v.indexOf(b)!==-1})});if(h.length===0){o.innerHTML='<div class="search-no-results">No results found.</div>';return}o.innerHTML=h.slice(0,10).map(function(p){var v=p.excerpt||"";return v.length>120&&(v=v.substring(0,120)+"..."),'<a class="search-result" href="'+encodeURI(p.url)+'"><div class="search-result__title">'+s(p.title)+"</div>"+(v?'<div class="search-result__excerpt">'+s(v)+"</div>":"")+"</a>"}).join("")}function s(r){var l=document.createElement("div");return l.textContent=r,l.innerHTML}var d;n.addEventListener("input",function(){clearTimeout(d);var r=n.value.trim();d=setTimeout(function(){f(r)},200)}),t.addEventListener("click",c),i.addEventListener("click",u),e.addEventListener("click",function(r){r.target===e&&u()}),document.addEventListener("keydown",function(r){r.key==="Escape"&&!e.hidden&&u(),(r.ctrlKey||r.metaKey)&&r.key==="k"&&(r.preventDefault(),e.hidden?c():u())})}function B(){var t=document.querySelector(".offline-banner");if(!t)return;function e(){navigator.onLine?t.hidden=!0:t.hidden=!1}window.addEventListener("online",e),window.addEventListener("offline",e),e()}document.addEventListener("DOMContentLoaded",function(){if(S(),E(),T(),_(),B(),M(),L(),typeof Swup<"u"){var t=new Swup({containers:["#swup-sidebar","#swup-content"],animationSelector:'[class*="swup-transition-"]',cache:!0,animateHistoryBrowsing:!0});t.hooks.on("visit:start",function(){var e=document.querySelector(".scroll-progress");e&&(e.classList.add("progress-bar--loading"),e.style.width="80%")}),t.hooks.on("content:replace",function(){var e=document.querySelector(".scroll-progress");e&&(e.style.width="100%",setTimeout(function(){e.classList.remove("progress-bar--loading"),e.style.width="0%"},300))}),t.hooks.on("page:view",function(){L();var e=document.getElementById("main");e&&(e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}))})}});document.documentElement.style.scrollBehavior="smooth";function L(){let t=document.querySelector(".page__footer");if(t){let e=()=>{document.body.style.marginBottom=t.offsetHeight+"px"};e(),typeof ResizeObserver<"u"?new ResizeObserver(e).observe(t):window.addEventListener("resize",e)}P(),A(),q(),O(),k(),C(),I(),window.scrollTo(0,0)}window.initPageFeatures=L;})();
