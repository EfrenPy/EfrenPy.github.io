<!-- start custom head snippets -->

<style>
/* Fix hamburger menu flash (FOUC) */
.greedy-nav button {
  display: none !important;
}

.greedy-nav .hidden-links {
  display: none !important;
}

@media (max-width: 768px) {
  .greedy-nav button.js-ready {
    display: block !important;
  }
}

/* Instant page transitions */
.masthead {
  transition: all 0.15s ease;
}

.masthead.scrolled {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.08);
  border-bottom-color: #e2e8f0;
}

/* Page transition optimization */
body {
  opacity: 1 !important;
  visibility: visible !important;
}

/* Modern layout improvements */
#main {
  max-width: 1400px;
  margin: 0 auto;
}

.page {
  max-width: 100%;
}

@media (min-width: 1280px) {
  .page {
    max-width: 900px;
  }
}
</style>

<script>
// Optimized scroll handler for sticky navigation
(function() {
  'use strict';

  var masthead = null;
  var ticking = false;
  var scrolled = false;

  function updateNav() {
    if (!masthead) return;

    var shouldBeScrolled = window.pageYOffset > 50;

    if (shouldBeScrolled !== scrolled) {
      scrolled = shouldBeScrolled;
      if (scrolled) {
        masthead.classList.add('scrolled');
      } else {
        masthead.classList.remove('scrolled');
      }
    }

    ticking = false;
  }

  function requestTick() {
    if (!ticking) {
      requestAnimationFrame(updateNav);
      ticking = true;
    }
  }

  // Fix hamburger menu flash
  function initNavButton() {
    var navButton = document.querySelector('.greedy-nav button');
    if (navButton && window.innerWidth <= 768) {
      navButton.classList.add('js-ready');
    }
  }

  // Initialize on DOM load
  document.addEventListener('DOMContentLoaded', function() {
    masthead = document.querySelector('.masthead');
    window.addEventListener('scroll', requestTick, { passive: true });
    updateNav(); // Check initial state
    initNavButton(); // Fix hamburger menu
  });
})();
</script>

<!-- end custom head snippets -->
